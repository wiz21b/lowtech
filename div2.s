;;; acme -o div2.o -r report.txt div2.s

	mul1 = $80
	mul2 = $81
	length	= 224
	fx 	= 230
	fy 	= 232
	slope 	= 234

	* = $900







	!source "compu_line.s"




slope65536:	!word $180
	!byte 0
x1:	!word 100
y1:	!byte 50
x2:	!word 14
y2:	!byte 14
dx:	!word 0
dy:	!byte 0
dx_positive:	!byte 0
dy_positive:	!byte 0
work:	!word 0
slope256_2:	!word 0
left_mask:	!byte 0
right_mask:	!byte 0
slope_by_256:	!byte 0
mask_right:	!byte 0
clip_flags:	!byte 0

one_over_x:
	; 256 values
	;; 65536 / a
	!word $0000, $FFFF, $8000, $5555, $4000, $3333, $2AAB, $2492, $2000, $1C72
	!word $199A, $1746, $1555, $13B1, $1249, $1111, $1000, $0F0F, $0E39, $0D79
	!word $0CCD, $0C31, $0BA3, $0B21, $0AAB, $0A3D, $09D9, $097B, $0925, $08D4
	!word $0889, $0842, $0800, $07C2, $0788, $0750, $071C, $06EB, $06BD, $0690
	!word $0666, $063E, $0618, $05F4, $05D1, $05B0, $0591, $0572, $0555, $0539
	!word $051F, $0505, $04EC, $04D5, $04BE, $04A8, $0492, $047E, $046A, $0457
	!word $0444, $0432, $0421, $0410, $0400, $03F0, $03E1, $03D2, $03C4, $03B6
	!word $03A8, $039B, $038E, $0382, $0376, $036A, $035E, $0353, $0348, $033E
	!word $0333, $0329, $031F, $0316, $030C, $0303, $02FA, $02F1, $02E9, $02E0
	!word $02D8, $02D0, $02C8, $02C1, $02B9, $02B2, $02AB, $02A4, $029D, $0296
	!word $028F, $0289, $0283, $027C, $0276, $0270, $026A, $0264, $025F, $0259
	!word $0254, $024E, $0249, $0244, $023F, $023A, $0235, $0230, $022B, $0227
	!word $0222, $021E, $0219, $0215, $0211, $020C, $0208, $0204, $0200, $01FC
	!word $01F8, $01F4, $01F0, $01ED, $01E9, $01E5, $01E2, $01DE, $01DB, $01D7
	!word $01D4, $01D1, $01CE, $01CA, $01C7, $01C4, $01C1, $01BE, $01BB, $01B8
	!word $01B5, $01B2, $01AF, $01AC, $01AA, $01A7, $01A4, $01A1, $019F, $019C
	!word $019A, $0197, $0195, $0192, $0190, $018D, $018B, $0188, $0186, $0184
	!word $0182, $017F, $017D, $017B, $0179, $0176, $0174, $0172, $0170, $016E
	!word $016C, $016A, $0168, $0166, $0164, $0162, $0160, $015E, $015D, $015B
	!word $0159, $0157, $0155, $0154, $0152, $0150, $014E, $014D, $014B, $0149
	!word $0148, $0146, $0144, $0143, $0141, $0140, $013E, $013D, $013B, $013A
	!word $0138, $0137, $0135, $0134, $0132, $0131, $012F, $012E, $012D, $012B
	!word $012A, $0129, $0127, $0126, $0125, $0123, $0122, $0121, $011F, $011E
	!word $011D, $011C, $011A, $0119, $0118, $0117, $0116, $0115, $0113, $0112
	!word $0111, $0110, $010F, $010E, $010D, $010B, $010A, $0109, $0108, $0107
	!word $0106, $0105, $0104, $0103, $0102, $0101


modulo7:
	!byte 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5,6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4,5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3,4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2,3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3


div7:
	!byte 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7,7, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 14, 14,14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 30, 30, 30, 30, 30, 30, 30, 31, 31, 31, 31, 31, 31, 31, 32, 32, 32, 32, 32, 32, 32, 33, 33, 33, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 35, 35, 35, 36, 36, 36, 36

hline_masks_left:
; 1 means keep
	!byte %01111111	; 1111111
	!byte %01111110	; 0111111
	!byte %01111100	; 0011111
	!byte %01111000	; 0001111
	!byte %01110000	; 0000111
	!byte %01100000	; 0000011
	!byte %01000000	; 0000001
hline_masks_right:
	!byte %00000001	; 1000000
	!byte %00000011	; 1100000
	!byte %00000111	; 1110000
	!byte %00001111	; 1111000
	!byte %00011111	; 1111100
	!byte %00111111	; 1111110
	!byte %01111111	; 1111111
